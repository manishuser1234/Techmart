import React from 'react';
import { Link } from 'react-router-dom';
import { ShoppingCart, ArrowRight } from 'lucide-react';
import { useCart } from '../context/CartContext';
import Button from '../components/ui/Button';
import CartItem from '../components/cart/CartItem';

const CartPage: React.FC = () => {
  const { items, removeFromCart, updateQuantity, totalItems, totalPrice } = useCart();
  
  if (items.length === 0) {
    return (
      <div className="container mx-auto px-4 py-12 text-center">
        <div className="max-w-md mx-auto">
          <ShoppingCart size={64} className="mx-auto text-gray-300 mb-6" />
          <h1 className="text-2xl font-bold mb-4">Your Cart is Empty</h1>
          <p className="text-gray-600 mb-8">
            Looks like you haven't added any products to your cart yet.
          </p>
          <Link to="/">
            <Button variant="primary" size="lg" fullWidth>
              Continue Shopping
            </Button>
          </Link>
        </div>
      </div>
    );
  }
  
  // Calculate subtotal, shipping, and total
  const subtotal = totalPrice;
  const shipping = subtotal > 100 ? 0 : 10;
  const tax = subtotal * 0.07; // 7% tax
  const total = subtotal + shipping + tax;
  
  return (
    <div className="container mx-auto px-4 py-8">
      <h1 className="text-2xl font-bold mb-8">Shopping Cart ({totalItems} items)</h1>
      
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {/* Cart Items */}
        <div className="lg:col-span-2">
          <div className="bg-white rounded-lg shadow-sm p-6">
            {items.map((item) => (
              <CartItem
                key={item.product.id}
                item={item}
                updateQuantity={updateQuantity}
                removeItem={removeFromCart}
              />
            ))}
          </div>
        </div>
        
        {/* Order Summary */}
        <div className="lg:col-span-1">
          <div className="bg-white rounded-lg shadow-sm p-6 sticky top-20">
            <h2 className="text-lg font-bold mb-4">Order Summary</h2>
            
            <div className="space-y-3 mb-6">
              <div className="flex justify-between">
                <span className="text-gray-600">Subtotal</span>
                <span className="font-medium">${subtotal.toFixed(2)}</span>
              </div>
              <div className="flex justify-between">
                <span className="text-gray-600">Shipping</span>
                <span className="font-medium">
                  {shipping === 0 ? 'Free' : `$${shipping.toFixed(2)}`}
                </span>
              </div>
              <div className="flex justify-between">
                <span className="text-gray-600">Tax (7%)</span>
                <span className="font-medium">${tax.toFixed(2)}</span>
              </div>
              <div className="border-t border-gray-200 pt-3 mt-3">
                <div className="flex justify-between font-bold">
                  <span>Total</span>
                  <span>${total.toFixed(2)}</span>
                </div>
              </div>
            </div>
            
            <Link to="/checkout">
              <Button 
                variant="primary" 
                size="lg" 
                fullWidth 
                className="flex items-center justify-center gap-2"
              >
                Proceed to Checkout
                <ArrowRight size={16} />
              </Button>
            </Link>
            
            <div className="mt-6">
              <h3 className="font-medium mb-2">Accepted Payment Methods</h3>
              <div className="flex gap-2">
                <div className="p-2 border border-gray-200 rounded">
                  <svg className="h-6" viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="48" height="32" rx="4" fill="white"/>
                    <path d="M18.5488 20.9213H15.0845L17.285 11.07H20.7493L18.5488 20.9213Z" fill="#00579F"/>
                    <path d="M29.3495 11.2979C28.739 11.0641 27.8043 10.8086 26.6499 10.8086C23.7942 10.8086 21.7794 12.282 21.7664 14.4049C21.7535 15.9828 23.1974 16.866 24.2582 17.4077C25.3449 17.9611 25.7106 18.3269 25.7106 18.8246C25.6977 19.6136 24.7108 19.9794 23.7937 19.9794C22.5235 19.9794 21.8611 19.8161 20.8264 19.3899L20.4092 19.1977L19.9661 21.5519C20.69 21.8459 22.0824 22.1064 23.5262 22.1182C26.5539 22.1182 28.5301 20.6669 28.5432 18.3922C28.5561 17.1457 27.8418 16.186 26.2597 15.4009C25.2897 14.8832 24.6922 14.531 24.6922 14.007C24.6922 13.5452 25.2637 13.0597 26.4698 13.0597C27.4664 13.0357 28.1945 13.2673 28.7524 13.5012L29.0403 13.6445L29.3495 11.2979Z" fill="#00579F"/>
                    <path d="M33.7273 17.5629C33.9891 16.8869 34.8983 14.5807 34.8983 14.5807C34.8853 14.6046 35.1438 13.8987 35.2883 13.4732L35.4975 14.4449C35.4975 14.4449 36.0306 16.9467 36.1623 17.5629C35.7194 17.5629 34.2626 17.5629 33.7273 17.5629ZM37.7962 11.07H35.8026C35.1814 11.07 34.7126 11.2588 34.4512 11.9387L30.8427 20.9213H34.0676C34.0676 20.9213 34.5496 19.5994 34.6679 19.2812C35.0071 19.2812 37.5871 19.2812 38.018 19.2812C38.1109 19.6953 38.3714 20.9213 38.3714 20.9213H41.1916L37.7962 11.07Z" fill="#00579F"/>
                    <path d="M13.9456 11.07L10.9291 17.5673L10.6072 16.1131C10.0882 14.5333 8.47612 12.8011 6.66553 11.9399L9.44588 20.9177H12.6864L17.3969 11.07H13.9456Z" fill="#00579F"/>
                    <path d="M8.66099 11.07H3.62423L3.56836 11.329C7.40578 12.2159 9.97456 14.0053 10.6071 16.1131L9.5523 12.0021C9.39753 11.34 9.07963 11.0819 8.66099 11.07Z" fill="#FAA61A"/>
                  </svg>
                </div>
                <div className="p-2 border border-gray-200 rounded">
                  <svg className="h-6" viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="48" height="32" rx="4" fill="white"/>
                    <path d="M30.3808 10.9091H27.2846C26.5106 10.9091 25.9235 11.1023 25.5663 11.9318L21.5421 21.0909H24.4486C24.4486 21.0909 24.9 19.975 24.9953 19.7045H29.2089C29.2827 20.0455 29.5211 21.0909 29.5211 21.0909H32.0916L30.3808 10.9091ZM25.9235 17.5682C26.1835 16.9091 27.0785 14.5682 27.0785 14.5682C27.0754 14.5682 27.2593 14.0712 27.3685 13.7614L27.5302 14.5C27.5302 14.5 28.0447 16.9773 28.1644 17.5682H25.9235Z" fill="#007844"/>
                    <path d="M23.7168 17.7841L24.9321 13.7614C24.9321 13.7614 23.9844 12.6136 22.6105 12.6136C21.1841 12.6136 18.1724 13.3182 18.1724 16.2727C18.1724 19.0682 21.6618 18.9773 21.6618 20.1364C21.6618 21.2955 19.0366 20.9659 17.7895 19.9318L16.5316 23.7386C16.5316 23.7386 17.5108 24.5909 19.6237 24.5909C21.7366 24.5909 24.7431 23.5114 24.7431 20.6818C24.7431 17.9318 21.2158 17.7955 21.2158 16.7727C21.2189 15.75 23.0876 16.0114 23.7168 16.5V17.7841Z" fill="#EB6C12"/>
                    <path d="M16.5421 10.9091L13.0474 19.1932L12.7053 17.8977C12.0316 16.0455 10.1737 14.0455 8.07895 13.0227L11.2789 21.0909L14.3342 21.0881L19.4105 10.9091H16.5421Z" fill="#0076BC"/>
                    <path d="M11.4947 11.5909C11.2579 11.4773 10.7947 11.3636 10.2368 11.3636C7.93682 11.3636 6.25263 12.6591 6.25263 14.5682C6.25263 16.0455 7.34737 16.9091 8.16316 17.4318C8.98158 17.9545 9.2421 18.2727 9.2421 18.7045C9.2421 19.3409 8.49474 19.6364 7.79474 19.6364C6.83684 19.6364 6.33158 19.4773 5.56579 19.0909L5.25 19.0227L4.92632 21.2727C5.23421 21.4091 6.01421 21.6591 6.82895 21.6591C9.28421 21.6591 10.9316 20.3864 10.9316 18.3182C10.9316 17.1818 10.3368 16.2955 9.0421 15.5455C8.30526 15.0682 7.86316 14.7727 7.86316 14.3182C7.86316 13.9091 8.25789 13.5 9.07895 13.5C9.76736 13.5 10.2653 13.6364 10.6421 13.7727L10.8605 13.8636L11.4947 11.5909Z" fill="#0076BC"/>
                  </svg>
                </div>
                <div className="p-2 border border-gray-200 rounded">
                  <svg className="h-6" viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="48" height="32" rx="4" fill="white"/>
                    <path fillRule="evenodd" clipRule="evenodd" d="M22.2871 21.498H25.8059V10.498H22.2871V21.498Z" fill="#FF5F00"/>
                    <path d="M22.5956 16.0018C22.5956 13.8105 23.6805 11.8705 25.3728 10.6543C24.2916 9.7543 22.9303 9.2168 21.4453 9.2168C17.698 9.2168 14.6543 12.2605 14.6543 16.008C14.6543 19.7555 17.698 22.7993 21.4453 22.7993C22.9303 22.7993 24.2916 22.2618 25.3728 21.3618C23.6805 20.1368 22.5956 18.1968 22.5956 16.0018Z" fill="#EB001B"/>
                    <path d="M33.4501 16.0018C33.4501 19.7493 30.4064 22.793 26.6591 22.793C25.1741 22.793 23.8129 22.2555 22.7316 21.3555C24.4316 20.1305 25.5091 18.1905 25.5091 16.0018C25.5091 13.8093 24.4241 11.8693 22.7316 10.6543C23.8129 9.7543 25.1741 9.2168 26.6591 9.2168C30.4064 9.2168 33.4501 12.2605 33.4501 16.0018Z" fill="#F79E1B"/>
                  </svg>
                </div>
                <div className="p-2 border border-gray-200 rounded">
                  <svg className="h-6" viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="48" height="32" rx="4" fill="white"/>
                    <path d="M19.2824 12.916C19.2824 14.576 18.0624 15.88 16.4184 15.88H14.3264V10.04H16.4184C18.0624 10.04 19.2824 11.256 19.2824 12.916ZM16.4184 11.112H15.5584V14.72H16.4184C17.4104 14.72 18.0384 13.908 18.0384 12.916C18.0384 11.924 17.4104 11.112 16.4184 11.112Z" fill="#003087"/>
                    <path d="M19.9146 15.88H21.1466V10.04H19.9146V15.88Z" fill="#003087"/>
                    <path d="M24.0586 12.04C23.0666 12.04 22.3266 12.78 22.3266 13.772C22.3266 14.764 23.0666 15.504 24.0586 15.504C25.0506 15.504 25.7906 14.764 25.7906 13.772C25.7906 12.78 25.0506 12.04 24.0586 12.04ZM24.0586 14.468C23.6626 14.468 23.5506 14.128 23.5506 13.772C23.5506 13.416 23.6626 13.076 24.0586 13.076C24.4546 13.076 24.5666 13.416 24.5666 13.772C24.5666 14.128 24.4546 14.468 24.0586 14.468Z" fill="#003087"/>
                    <path d="M29.0986 15.88V13.212C29.0986 12.472 28.6066 12.04 27.6146 12.04C27.1226 12.04 26.6306 12.22 26.3186 12.728C26.0906 12.304 25.7426 12.04 25.1746 12.04C24.7426 12.04 24.3226 12.22 24.0346 12.62V12.152H22.8986V15.88H24.1306V13.676C24.1306 13.272 24.3226 13.076 24.6346 13.076C24.9466 13.076 25.1026 13.296 25.1026 13.676V15.88H26.3346V13.676C26.3346 13.272 26.5266 13.076 26.8386 13.076C27.1506 13.076 27.3066 13.296 27.3066 13.676V15.88H29.0986Z" fill="#003087"/>
                    <path d="M32.7485 12.152H31.8285V11.28H30.5965V12.152H29.9565V13.152H30.5965V14.576C30.5965 15.4 31.0045 15.976 32.0205 15.976C32.4285 15.976 32.8365 15.88 33.1485 15.688L32.8365 14.744C32.6565 14.888 32.4045 14.936 32.1885 14.936C31.7925 14.936 31.8285 14.608 31.8285 14.324V13.152H32.7485V12.152Z" fill="#003087"/>
                    <path d="M36.3365 12.04C35.8565 12.04 35.4605 12.248 35.1725 12.608V12.152H33.9645V17.24H35.1965V15.424C35.4845 15.784 35.8805 15.992 36.3365 15.992C37.2805 15.992 38.0205 15.228 38.0205 14.008C38.0205 12.788 37.2805 12.04 36.3365 12.04ZM36.0245 14.936C35.6285 14.936 35.4245 14.72 35.1965 14.384V13.644C35.4245 13.296 35.6285 13.088 36.0245 13.088C36.4685 13.088 36.7685 13.452 36.7685 14.008C36.7685 14.576 36.4685 14.936 36.0245 14.936Z" fill="#003087"/>
                    <path d="M17.9264 20.5681C17.2144 20.0841 16.2224 19.8441 15.2064 19.8441C13.8064 19.8441 12.7424 20.5201 12.7424 21.5841C12.7424 22.4081 13.4304 22.9761 14.6864 23.1681L15.7984 23.3361C16.3424 23.4321 16.6544 23.5521 16.6544 23.8401C16.6544 24.2001 16.1984 24.4401 15.3744 24.4401C14.5024 24.4401 13.8064 24.1521 13.3984 23.8881L12.8064 24.8561C13.4784 25.3161 14.3984 25.5561 15.3504 25.5561C17.0464 25.5561 18.0144 24.8561 18.0144 23.7881C18.0144 22.8921 17.2784 22.3481 16.0464 22.1561L14.9344 21.9881C14.4424 21.9161 14.1064 21.7961 14.1064 21.4841C14.1064 21.1241 14.5024 20.9321 15.2544 20.9321C16.0224 20.9321 16.7824 21.2201 17.1184 21.4121L17.9264 20.5681Z" fill="#003087"/>
                    <path d="M21.2463 21.44C20.9703 21.2 20.5863 21.08 20.1543 21.08C19.2583 21.08 18.6103 21.728 18.6103 22.624C18.6103 23.52 19.2583 24.168 20.1543 24.168C20.5863 24.168 20.9703 24.048 21.2463 23.808V24.048C21.2463 24.624 20.8503 24.936 20.1783 24.936C19.6863 24.936 19.1463 24.76 18.7983 24.504L18.4383 25.464C18.8823 25.752 19.5543 25.928 20.2143 25.928C21.6143 25.928 22.5103 25.248 22.5103 23.928V21.176H21.2463V21.44ZM20.3223 23.208C19.9263 23.208 19.6623 22.96 19.6623 22.624C19.6623 22.288 19.9263 22.04 20.3223 22.04C20.7183 22.04 20.9823 22.288 20.9823 22.624C20.9823 22.96 20.7183 23.208 20.3223 23.208Z" fill="#003087"/>
                    <path d="M27.4022 21.08C26.9702 21.08 26.6102 21.248 26.3822 21.536C26.1782 21.248 25.8422 21.08 25.4222 21.08C25.0502 21.08 24.6782 21.224 24.4262 21.56V21.176H23.1622V25.464H24.4262V22.984C24.4262 22.6 24.6302 22.392 24.9422 22.392C25.2542 22.392 25.4102 22.6 25.4102 22.984V25.464H26.6742V22.984C26.6742 22.6 26.8782 22.392 27.1902 22.392C27.5022 22.392 27.6582 22.6 27.6582 22.984V25.464H28.9222V22.6C28.9222 21.68 28.3342 21.08 27.4022 21.08Z" fill="#003087"/>
                    <path d="M31.5621 21.08C30.6661 21.08 29.9261 21.824 29.9261 22.816C29.9261 23.808 30.6661 24.552 31.6581 24.552C32.2021 24.552 32.7461 24.36 33.1421 23.976L32.6501 23.208C32.3861 23.448 32.0621 23.592 31.7381 23.592C31.3301 23.592 30.9701 23.4 30.8821 22.96H33.3221C33.3341 22.888 33.3461 22.816 33.3461 22.744C33.3581 21.8 32.6421 21.08 31.5621 21.08ZM31.5621 22.04C31.9461 22.04 32.2141 22.288 32.2741 22.72H30.8701C30.9301 22.312 31.1821 22.04 31.5621 22.04Z" fill="#003087"/>
                    <path d="M35.9781 22.888V21.176H34.7141V25.464H35.9781V23.544C35.9781 22.96 36.4221 22.528 37.0341 22.528C37.1341 22.528 37.2461 22.54 37.3461 22.552V21.128C36.8061 21.116 36.2501 21.464 35.9781 22.888Z" fill="#003087"/>
                    <path d="M40.5461 21.1519H39.1461V19.8799H37.8821V21.1519H37.0861V22.2319H37.8821V23.9039C37.8821 24.9639 38.3621 25.5679 39.5701 25.5679C40.0381 25.5679 40.5541 25.4359 40.8901 25.1879L40.5221 24.1599C40.2701 24.3279 39.9461 24.4159 39.6701 24.4159C39.2261 24.4159 39.1461 24.1159 39.1461 23.6239V22.2319H40.5461V21.1519Z" fill="#003087"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default CartPage;